define("Profile",["require","exports"],function(e,t){"use strict";var s=function(){function t(e,t,s){this.nickname=e,this.fullName=t,this.email=s,this.subnick=""}return t.prototype.getNickname=function(){return this.nickname},t.prototype.getFullName=function(){return this.fullName},t.prototype.getEmail=function(){return this.email},t.prototype.getSubnick=function(){return this.subnick},t.prototype.display=function(e){e.innerHTML=this.nickname},t.prototype.registerUser=function(){var t=e("mysql"),s=t.createConnection({host:"localhost",user:"tunnel",password:"123456",database:"TunnelMessenger"});s.connect();var n="INSERT INTO users(username, nickname, subnick, fullName, email)                     VALUES("+this.nickname+","+this.nickname+","+this.subnick+",                     "+this.email+")";s.query(n,function(e){if(e)throw e;console.log(n)}),s.end},t}();t.User=s}),define("Message",["require","exports"],function(e,t){"use strict";var s=function(){function e(e,t,s){this.content=e,this.author=t,this.datetime=s}return e.prototype.display=function(e){e.innerHTML=this.content},e.prototype.getAuthor=function(){return this.author},e.prototype.getDatetime=function(){return this.datetime},e}();t.TextMessage=s}),define("Utils",["require","exports"],function(e,t){"use strict";var s;!function(e){function t(e,t){var s=document.createElement(e);return t&&this.foreach(t,function(e,t){"click"==e?s.addEventListener("click",t):s[e]=t}),s}function s(e,t){for(var s in e)if(e.hasOwnProperty(s)&&t(s,e[s])===!1)break}e.create=t,e.foreach=s}(s=t.utils||(t.utils={}))}),define("Chat",["require","exports","Utils"],function(e,t,s){"use strict";var n=function(){function e(e,t,s){this.messages=[],this.name=e,this.users=t,this.node=s}return e.prototype.addMessage=function(e){var t=this.messages[this.messages.length-1];this.messages.push(e),console.log("previous:",t),console.log("this:",e),t&&e.getAuthor()==t.getAuthor()||(console.log("[SPAWN]"),this.spawnMessageBlock()),console.log("[MERGE]"),this.mergeWithLastBlock(e)},e.prototype.spawnMessageBlock=function(){var e=this.messages[this.messages.length-1],t=s.utils.create("div",{className:"messageBlock"}),n=s.utils.create("div",{className:"author"});e.getAuthor().display(n),t.appendChild(n),this.node.appendChild(t),this.lastMessageBlock=t},e.prototype.mergeWithLastBlock=function(e){var t=s.utils.create("div",{className:"content"});e.display(t),this.lastMessageBlock.appendChild(t)},e}();t.Chat=n}),define("main",["require","exports","Chat","Message","Profile"],function(e,t,s,n,i){"use strict";$(document).ready(function(){console.log("Server running.");var e=io(),t=new s.Chat("Chat #1",[],$("#display").get(0));e.emit("chat message","kk eae men"),$("#sendMessage").click(function(){return e.emit("chat message",$("#messageBox").val()),$("#messageBox").val(""),!1}),$("#messageBox").keyup(function(e){13==e.keyCode&&$("#sendMessage").click()});var o={};e.on("chat message",function(e,s){o.hasOwnProperty(e)||(o[e]=new i.User(e,e+" da Silva",e+"@baidu.com"));var a=new n.TextMessage(s,o[e],new Date);t.addMessage(a),$("html, body").scrollTop($(document).height())})})});
